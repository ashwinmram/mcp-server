[
  "Config files in Laravel packages should use env() directly, not config() helper inside them. For example, use 'server_url' => env('MCP_SERVER_URL') instead of 'server_url' => config('services.mcp.server_url', env('MCP_SERVER_URL')). The config() helper cannot reference other config values when the config file is being merged - it causes binding resolution errors. Service classes should handle fallback logic using the null coalescing operator: config('package.key') ?? config('services.fallback.key').",
  "When testing Laravel service providers in unit tests, avoid manually instantiating the service provider with new ServiceProvider(app()). This causes issues with mergeConfigFrom() which requires a fully bootstrapped application context. Instead, rely on Laravel's package discovery mechanism. The service provider is automatically registered via composer.json extra.laravel.providers, so tests should verify the command exists in Artisan::all() and config values are accessible, rather than manually instantiating the provider.",
  "Exception messages should match test expectations exactly. Keep exception messages concise and consistent with what tests assert. If a test expects 'MCP server URL and API token must be configured', the service should throw that exact message, not a longer detailed message. Detailed messages can be added to documentation or logging, but keep exception messages focused.",
  "When setting up HTTP fake in Pest tests with beforeEach, ensure config values are properly reset. Set package config to null explicitly (e.g., Config::set('mcp-pusher.server_url', null)) so the service can properly fallback to services.mcp config. This ensures tests accurately reflect the fallback behavior without config persistence between tests.",
  "Always run Laravel Pint (vendor/bin/pint --dirty) before finalizing changes to ensure code matches project style. Pint automatically fixes formatting issues like new_with_parentheses, no_superfluous_phpdoc_tags, and other style rules. This ensures consistency with Laravel conventions and the project's code standards."
]